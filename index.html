<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock & % Calc</title>
    <style>
        :root {
            --bg: #f8f9fa;
            --card: #ffffff;
            --text: #333;
            --accent: #007bff;
            --border: #e0e0e0;
            --red: #d93025;
            --green: #188038;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .container { width: 100%; max-width: 480px; }

        .card {
            background: var(--card);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }

        h2 {
            font-size: 0.85rem;
            margin-top: 0;
            margin-bottom: 1.2rem;
            font-weight: 700;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 1rem; }
        .input-group { margin-bottom: 1rem; }

        label {
            display: block;
            font-size: 0.75rem;
            margin-bottom: 0.4rem;
            color: #666;
            font-weight: 600;
        }

        input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
            outline: none;
            background: #fafafa;
        }

        input:focus { border-color: var(--accent); background: #fff; }

        /* Function 1 Result Styling */
        .result-container {
            text-align: center;
            padding: 1rem;
            background: #f1f3f4;
            border-radius: 8px;
            min-height: 50px;
        }
        .pct-main { font-size: 1.4rem; font-weight: 800; }
        .profit-sub { font-size: 1rem; margin-top: 4px; font-weight: 500; }

        /* Function 2 Grid Styling */
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 1rem;
        }

        .column-label {
            font-size: 0.7rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        .neg-label { color: var(--red); }
        .pos-label { color: var(--green); }

        .grid-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            margin-bottom: 5px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 0.85rem;
            font-variant-numeric: tabular-nums;
        }
        .pct-label { color: #888; font-weight: 600; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h2>Stock Change Calculator</h2>
        <div class="input-row">
            <div class="input-group">
                <label>Buy Price</label>
                <input type="number" id="f1-initial" placeholder="0.00" oninput="calculateChange()">
            </div>
            <div class="input-group">
                <label>Sell Price</label>
                <input type="number" id="f1-final" placeholder="0.00" oninput="calculateChange()">
            </div>
        </div>
        <div class="input-group">
            <label>Principal Investment (Optional)</label>
            <input type="number" id="f1-principal" placeholder="e.g. 1000" oninput="calculateChange()">
        </div>
        
        <div class="result-container" id="f1-res-box">
            <div id="f1-pct" class="pct-main">0.00%</div>
            <div id="f1-profit" class="profit-sub"></div>
        </div>
    </div>

    <div class="card">
        <h2>Quick Targets (1-10%)</h2>
        <div class="input-group">
            <label>Current Stock Price</label>
            <input type="number" id="f2-initial" placeholder="Enter price..." oninput="calculateCommon()">
        </div>
        
        <div class="grid-container">
            <div>
                <div class="column-label neg-label">Decrease (-)</div>
                <div id="neg-grid"></div>
            </div>
            <div>
                <div class="column-label pos-label">Increase (+)</div>
                <div id="pos-grid"></div>
            </div>
        </div>
    </div>
</div>

<script>
    function calculateChange() {
        const initial = parseFloat(document.getElementById('f1-initial').value);
        const final = parseFloat(document.getElementById('f1-final').value);
        const principal = parseFloat(document.getElementById('f1-principal').value);
        
        const pctDisplay = document.getElementById('f1-pct');
        const profitDisplay = document.getElementById('f1-profit');

        if (initial && final) {
            const changePct = ((final - initial) / initial) * 100;
            const sign = changePct > 0 ? "+" : "";
            
            // Set Color and Percent
            const color = changePct >= 0 ? "var(--green)" : "var(--red)";
            pctDisplay.innerText = `${sign}${changePct.toFixed(2)}%`;
            pctDisplay.style.color = color;

            // Optional Principal Logic
            if (!isNaN(principal) && principal > 0) {
                const profitAmount = (changePct / 100) * principal;
                const pSign = profitAmount > 0 ? "+$" : "-$";
                profitDisplay.innerText = `${pSign}${Math.abs(profitAmount).toLocaleString(undefined, {minimumFractionDigits: 2})}`;
                profitDisplay.style.color = color;
            } else {
                profitDisplay.innerText = "";
            }
        } else {
            pctDisplay.innerText = "0.00%";
            pctDisplay.style.color = "inherit";
            profitDisplay.innerText = "";
        }
    }

    function calculateCommon() {
        const initial = parseFloat(document.getElementById('f2-initial').value);
        const posGrid = document.getElementById('pos-grid');
        const negGrid = document.getElementById('neg-grid');
        
        posGrid.innerHTML = ""; 
        negGrid.innerHTML = "";

        if (initial) {
            for (let i = 1; i <= 10; i++) {
                // Negative (Left)
                const negVal = initial * (1 - i/100);
                negGrid.innerHTML += `
                    <div class="grid-item">
                        <span class="pct-label">-${i}%</span>
                        <span>${negVal.toFixed(2)}</span>
                    </div>`;

                // Positive (Right)
                const posVal = initial * (1 + i/100);
                posGrid.innerHTML += `
                    <div class="grid-item">
                        <span class="pct-label">+${i}%</span>
                        <span>${posVal.toFixed(2)}</span>
                    </div>`;
            }
        }
    }
</script>

</body>
</html>
